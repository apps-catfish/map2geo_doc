---
layout: page
title: "appfilter.ini 仕様"
---

* Table of contents
{:toc}

----

# 概要
Map2Geoでは地理情報の転送先アプリ一覧について、不要なアプリを除外して表示することができます(Ver5.01以降)。
定義ファイル "appfilter.ini" を用意することで、一覧から除外するアプリを指定することが可能です。

絶対使わないアプリが毎回表示されて煩わしいといった状況を改善できます。

# appfilter.ini
転送先アプリ一覧から除外するアプリの定義ファイル。
* <端末内部ストレージ>/map2geo/appfilter.ini
* テキストファイル
* 改行コード :CR \| LF \| CRLF
* エンコード :UTF-8を推奨

## ファイル内容の構成
* キー=値 のエントリの羅列で構成される
* [セクション名]でセクションを定義する
    * セクション名が重複する場合、同一セクションとして結合される
* 最初のセクションより前の行はグローバルセクション(セクション名""(空文字列))への記述として扱われる
* 行頭、行末のスペース、タブは無視される
* ";"(セミコロン)で始まる行はコメント行として無視される
    * 行頭以外ではコメントとみなされない

```
;グローバルセクション
キー=値
 :
 :
[セクション名1]
;コメント
キー=値
 :
 :
[セクション名2]
;コメント
キー=値
 :
 :
```
## セクション
次の3種類のセクションが利用できる:

| セクション名 | 適用対象 |
| ---- | ---- |
|  グローバルセクション | アプリ一覧全体 |
|  [place] | 場所の転送先アプリ一覧 |
|  [route] | ルートの転送先アプリ一覧 |

## キー
次の2種類のキーが利用できる:

| キー名 | 用途 |
| ---- | ---- |
|reject|値に記述されたパッケージ名のアプリを非表示にする|
|accept|値に記述されたパッケージ名のアプリを表示する|

## 値
値にはアプリのパッケージ名を記述する。
ワイルドカードによる記述が可能。

|ワイルドカード|意味|
|----|----|
|*(アスタリスク)|任意長の任意文字列(空文字列も合致)|
|?|1文字|
※正規表現ではありません

# 表示判定のルール
* 表示候補アプリ毎に表示/非表示の判定が行われる
* エントリの上から順に判定される
* 合致するエントリがあればそこでそのアプリの判定を終了する
* どのエントリにも合致しなかったアプリは表示と判定される
* [place] または [route] セクションが先に判定され、その結果に対してさらにグローバルセクションが判定される

# 例
```
;Google製以外のアプリを非表示にする
accept=com.google.*
reject=*
```

```
;場所を開くアプリにはGoogleマップとWazeだけを表示する
[place]
accept=com.google.android.apps.maps
accept=com.waze
reject=*
```

上記の内容をテキストファイルにコピペして、<端末内部ストレージ>/map2geo/appfilter.ini として置くことで試すことができる。

# アプリのパッケージ名の調べ方
## Map2Geoで調べる
アプリのショートカット作成時のタイトル編集画面でアプリのアイコンをタップすることで、そのアプリのパッケージ名が表示される。

## GooglePlayのURLから調べる
ブラウザ版のGooglePlayで対象アプリのページを開き、URLからそのパッケージ名を知ることができる。
URL内のidパラメータがパッケージ名。

Map2GeoであればURLは
`https://play.google.com/store/apps/details?id=catfish.android.map2geo`
となっており、パッケージ名
`catfish.android.map2geo`
を得ることができる。